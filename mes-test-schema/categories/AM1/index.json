{
  "title": "Test Result Cat AM1 Schema",
  "type": "object",
  "definitions": {
    "circuit": {
      "description": "Circuit completed (left or right)",
      "type": "string",
      "enum": [
        "Left",
        "Right"
      ]
    },
    "testData": {
      "additionalProperties": false,
      "description": "Data associated with the test",
      "properties": {
        "useOfStand": {
          "$ref": "#/definitions/singleFaultCompetencyOutcome"
        },
        "manualHandling": {
          "$ref": "#/definitions/singleFaultCompetencyOutcome"
        },
        "slalom": {
          "$ref": "#/definitions/singleFaultCompetencyOutcome"
        },
        "slowControl": {
          "$ref": "#/definitions/singleFaultCompetencyOutcome"
        },
        "uTurn": {
          "$ref": "#/definitions/singleFaultCompetencyOutcome"
        },
        "controlledStop": {
          "$ref": "#/definitions/singleFaultCompetencyOutcome"
        },
        "emergencyStop": {
          "$ref": "#/definitions/emergencyStop"
        },
        "avoidance": {
          "$ref": "#/definitions/avoidance"
        },
        "drivingFaults": {
          "$ref": "#/definitions/drivingFaults"
        },
        "seriousFaults": {
          "$ref": "#/definitions/seriousFaults"
        },
        "dangerousFaults": {
          "$ref": "#/definitions/dangerousFaults"
        },
        "ETA": {
          "$ref": "#/definitions/ETA"
        }
      },
      "type": "object"
    },
    "singleFaultCompetencyOutcome": {
      "description": "The possible outcomes of any single fault competency",
      "enum": [
        "DF",
        "S",
        "D"
      ],
      "type": "string"
    },
    "examiner": {
      "$ref": "../common/index.json#/definitions/examiner"
    },
    "testCentre":
    {
      "$ref": "../common/index.json#/definitions/testCentre"
    }
  ,
    "name": {
      "description": "Details of the individual's name",
      "type": "object",
      "properties": {
        "title": {
          "description": "The individual's title",
          "type": "string",
          "maxLength": 7
        },
        "firstName": {
          "description": "The individual's forename",
          "type": "string",
          "maxLength": 50
        },
        "secondName": {
          "description": "The individual's second name",
          "type": "string",
          "maxLength": 50
        },
        "thirdName": {
          "description": "The individual's third name",
          "type": "string",
          "maxLength": 50
        },
        "lastName": {
          "description": "The individual's surname",
          "type": "string",
          "maxLength": 50
        }
      },
      "additionalProperties": false
    },
    "address": {
      "description": "Details of the address",
      "type": "object",
      "properties": {
        "addressLine1": {
          "description": "First line of address",
          "type": "string",
          "maxLength": 255
        },
        "addressLine2": {
          "description": "Second line of address",
          "type": "string",
          "maxLength": 100
        },
        "addressLine3": {
          "description": "Third line of address",
          "type": "string",
          "maxLength": 100
        },
        "addressLine4": {
          "description": "Fourth line of address",
          "type": "string",
          "maxLength": 100
        },
        "addressLine5": {
          "description": "Fifth line of address",
          "type": "string",
          "maxLength": 255
        },
        "postcode": {
          "description": "The address postcode",
          "type": "string",
          "maxLength": 255
        }
      },
      "additionalProperties": false
    },
    "candidate": {
      "description": "Details of the candidate booked into the test slot",
      "type": "object",
      "properties": {
        "candidateId": {
          "description": "The id of the test candidate",
          "type": "integer"
        },
        "candidateName": {
          "$ref": "#/definitions/name"
        },
        "driverNumber": {
          "description": "The candidate's driver number, typically (though not always) 16 characters if UK, or 8 digits if NI",
          "type": "string",
          "maxLength": 24
        },
        "dateOfBirth": {
          "description": "The candidate's date of birth, formatted as an ISO 8601 date (YYYY-MM-DD)",
          "type": "string",
          "minLength": 10,
          "maxLength": 10
        },
        "gender": {
          "$ref": "#/definitions/gender"
        },
        "candidateAddress": {
          "$ref": "#/definitions/address"
        },
        "primaryTelephone": {
          "description": "The candidate's primary telephone number, if any (and consent to leave voicemail has been given)",
          "type": "string",
          "maxLength": 20
        },
        "secondaryTelephone": {
          "description": "The candidate's secondary telephone number, if any (and consent to leave voicemail has been given)",
          "type": "string",
          "maxLength": 20
        },
        "mobileTelephone": {
          "description": "The candidate's mobile telephone number, if any (and consent to leave voicemail has been given)",
          "type": "string",
          "maxLength": 30
        },
        "emailAddress": {
          "description": "The candidate's email address, if any",
          "type": "string",
          "maxLength": 100
        },
        "prn": {
          "description": "The candidate's ADI PRN (potential register number), if an ADI test",
          "type": "integer"
        },
        "previousADITests": {
          "description": "The number of previous test attempts, if an ADI test",
          "type": "integer"
        },
        "ethnicityCode": {
          "description": "A character between A and G representing different categories of ethnicity",
          "type": "string",
          "minLength": 1,
          "maxLength": 1
        },
        "businessAddress": {
          "$ref": "#/definitions/address"
        },
        "businessName": {
          "$ref": "#/definitions/businessName"
        },
        "businessTelephone": {
          "$ref": "#/definitions/businessTelephone"
        }
      },
      "additionalProperties": false
    },
    "applicationReference": {
      "description": "The full application identifier, including applicationId, bookingSequence and checkDigit",
      "type": "object",
      "properties": {
        "applicationId": {
          "description": "Unique identifier for each test application",
          "type": "integer"
        },
        "bookingSequence": {
          "description": "Booking sequence number of the test application",
          "type": "integer"
        },
        "checkDigit": {
          "description": "Reference checksum for the test application",
          "type": "integer"
        }
      },
      "additionalProperties": false,
      "required": [
        "applicationId",
        "bookingSequence",
        "checkDigit"
      ]
    },
    "initiator": {
      "description": "The reason for the previous test cancellation",
      "type": "string",
      "enum": [
        "Act of nature",
        "DSA"
      ],
      "maxLength": 15
    },
    "testSlotAttributes": {
      "description": "The additional attributes of the test slot such as Slot Id, Category, Start Time, etc.",
      "type": "object",
      "properties": {
        "slotId": {
          "description": "Unique identifier for the journal test slot",
          "type": "integer"
        },
        "start": {
          "description": "Start time of the test slot",
          "type": "string",
          "minLength": 19,
          "maxLength": 19
        },
        "vehicleTypeCode": {
          "description": "A short alpha (and sometimes numeric) code describing the vehicle type in vehicle slot type",
          "type": "string",
          "minLength": 1,
          "maxLength": 2
        },
        "welshTest": {
          "description": "Whether the test is to be conducted using the welsh language",
          "type": "boolean"
        },
        "specialNeedsCode": {
          "description": "Special needs code",
          "type": "string",
          "enum": [
            "NONE",
            "YES",
            "EXTRA"
          ]
        },
        "specialNeeds": {
          "description": "Whether the candidate has any special needs that require the D255 form to be completed",
          "type": "boolean"
        },
        "specialNeedsArray": {
          "description": "The special needs",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "extendedTest": {
          "description": "Whether this is an extended test",
          "type": "boolean"
        },
        "examinerVisiting": {
          "description": "Whether the examiner conducting the test slot is visiting a test centre that's not their home test centre",
          "type": "boolean"
        },
        "entitlementCheck": {
          "description": "Indicates whether the examiner needs to check the candidates entitlement evidence(e.g. test application has not been checked with DVLA)",
          "type": "boolean"
        },
        "previousCancellation": {
          "description": "The details of any previous test cancellations",
          "type": "array",
          "items": {
            "$ref": "#/definitions/initiator"
          }
        },
        "slotType": {
          "description": "A description of the types of test intended to be conducted in this slot (e.g. Standard Test / Extended Special Needs Test)",
          "type": "string"
        }
      },
      "additionalProperties": false,
      "required": [
        "slotId",
        "start",
        "vehicleTypeCode",
        "welshTest",
        "specialNeeds",
        "extendedTest"
      ]
    },
    "journalData": {
      "$ref": "../common/index.json#/definitions/journalData"
    },
    "signature": {
      "$ref": "../common/index.json#/definitions/signature"
    },
    "communicationMethod": {
      "$ref": "../common/index.json#/definitions/communicationMethod"
    },
    "conductedLanguage": {
      "$ref": "../common/index.json#/definitions/conductedLanguage"
    },
    "communicationPreferences": {
      "$ref": "../common/index.json#/definitions/communicationPreferences"
    },
    "preTestDeclarations": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "insuranceDeclarationAccepted": {
          "description": "Whether or not the candidate has declared that their test vehicle has a valid insurance policy",
          "type": "boolean"
        },
        "residencyDeclarationAccepted": {
          "description": "Whether or not the candidate has declared that they have lived in the UK for a period acceptable for taking the test",
          "type": "boolean"
        },
        "preTestSignature": {
          "$ref": "#/definitions/signature"
        },
        "DL196CBTCertNumber": {
          "$ref": "#/definitions/DL196CBTCertNumber"
        }
      },
      "required": [
        "insuranceDeclarationAccepted",
        "residencyDeclarationAccepted",
        "preTestSignature",
        "DL196CBTCertNumber"
      ]
    },
    "accompaniment": {
      "$ref": "../common/index.json#/definitions/accompaniment"
    },
    "gearboxCategory": {
      "$ref": "../common/index.json#/definitions/gearboxCategory"
    },
    "drivingFaultCount": {
      "$ref": "../common/index.json#/definitions/drivingFaultCount"
    },
    "faultComments": {
      "$ref": "../common/index.json#/definitions/faultComments"
    },
    "drivingFaults": {
      "description": "The driving faults accumulated during the test",
      "type": "object",
      "properties": {
        "precautions": {
          "$ref": "#/definitions/drivingFaultCount"
        },
        "precautionsComments": {
          "$ref": "#/definitions/faultComments"
        },
        "moveOffSafety": {
          "$ref": "#/definitions/drivingFaultCount"
        },
        "moveOffSafetyComments": {
          "$ref": "#/definitions/faultComments"
        },
        "moveOffControl": {
          "$ref": "#/definitions/drivingFaultCount"
        },
        "moveOffControlComments": {
          "$ref": "#/definitions/faultComments"
        }
      },
      "additionalProperties": false
    },
    "seriousFaultIndicator": {
      "$ref": "../common/index.json#/definitions/seriousFaultIndicator"
    },
    "seriousFaults": {
      "description": "The serious faults accumulated during the test",
      "type": "object",
      "properties": {
        "precautions": {
          "$ref": "#/definitions/seriousFaultIndicator"
        },
        "precautionsComments": {
          "$ref": "#/definitions/faultComments"
        },
        "moveOffSafety": {
          "$ref": "#/definitions/seriousFaultIndicator"
        },
        "moveOffSafetyComments": {
          "$ref": "#/definitions/faultComments"
        },
        "moveOffControl": {
          "$ref": "#/definitions/seriousFaultIndicator"
        },
        "moveOffControlComments": {
          "$ref": "#/definitions/faultComments"
        }
      },
      "additionalProperties": false
    },
    "dangerousFaultIndicator": {
      "$ref": "../common/index.json#/definitions/dangerousFaultIndicator"
    },
    "dangerousFaults": {
      "description": "The dangerous faults accumulated during the test",
      "type": "object",
      "properties": {
        "precautions": {
          "$ref": "#/definitions/dangerousFaultIndicator"
        },
        "precautionsComments": {
          "$ref": "#/definitions/faultComments"
        },
        "moveOffSafety": {
          "$ref": "#/definitions/dangerousFaultIndicator"
        },
        "moveOffSafetyComments": {
          "$ref": "#/definitions/faultComments"
        },
        "moveOffControl": {
          "$ref": "#/definitions/dangerousFaultIndicator"
        },
        "moveOffControlComments": {
          "$ref": "#/definitions/faultComments"
        }
      },
      "additionalProperties": false
    },
    "postTestDeclarations": {
      "$ref": "../common/index.json#/definitions/postTestDeclarations"
    },
    "weatherConditions": {
      "$ref": "../common/index.json#/definitions/weatherConditions"
    },
    "independentDriving": {
      "description": "Method chosen to conduct the independent driving section of the test",
      "type": "string",
      "enum": [
        "Diagram",
        "Traffic signs",
        "N/A"
      ]
    },
    "identification": {
      "$ref": "../common/index.json#/definitions/identification"
    },
    "testSummary": {
      "description": "Recording of other characteristics of the test",
      "type": "object",
      "properties": {
        "routeNumber": {
          "description": "Number of the route that was taken during the test",
          "type": "integer",
          "const": 88
        },
        "independentDriving": {
          "$ref": "#/definitions/independentDriving"
        },
        "candidateDescription": {
          "description": "Physical description of the candidate",
          "type": "string",
          "maxLength": 1000
        },
        "debriefWitnessed": {
          "description": "Indicates whether anybody else (e.g. ADI) was present for the debrief",
          "type": "boolean"
        },
        "identification": {
          "$ref": "#/definitions/identification"
        },
        "weatherConditions": {
          "description": "Description of the type of weather encountered during the test",
          "type": "array",
          "items": {
            "$ref": "#/definitions/weatherConditions"
          }
        },
        "D255": {
          "description": "Indicates whether a D255 form needs to be completed",
          "type": "boolean"
        },
        "additionalInformation": {
          "description": "Any comments that the DE wants to record about the test",
          "type": "string"
        },
        "circuit": {
          "$ref": "#/definitions/circuit"
        }
      },
      "additionalProperties": false
    },
    "categoryCode": {
      "description": "Category code for the test report",
      "type": "string",
      "enum": [
        "A",
        "A1",
        "A2",
        "AM"
      ]
    },
    "activityCode": {
      "$ref": "../common/index.json#/definitions/activityCode"
    },
    "gender": {
      "$ref": "../common/index.json#/definitions/gender"
    },
    "rekeyReason": {
      "$ref": "../common/index.json#/definitions/rekeyReason"
    },
    "transfer": {
      "$ref": "../common/index.json#/definitions/transfer"
    },
    "ipadIssue": {
      "$ref": "../common/index.json#/definitions/ipadIssue"
    },
    "other": {
      "$ref": "../common/index.json#/definitions/other"
    },
    "vehicleDetails": {
      "description": "Details about the vehicle to be used for the test",
      "type": "object",
      "properties": {
        "registrationNumber": {
          "description": "The vehicle registration number",
          "type": "string",
          "maxLength": 7
        },
        "gearboxCategory": {
          "$ref": "#/definitions/gearboxCategory"
        },
        "schoolBike": {
          "$ref": "#/definitions/schoolBike"
        }
      },
      "additionalProperties": false
    },
    "passCompletion": {
      "$ref": "../common/index.json#/definitions/passCompletion"
    },
    "DL196CBTCertNumber": {
      "description": "The number of the DL196 CBT certificate presented by the candidate",
      "type": "string",
      "maxLength": 8,
      "minLength": 8
    },
    "avoidance": {
      "description": "The outcome of avoidance tests",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "firstAttempt": {
          "description": "The speed of the first attempt",
          "type": "integer"
        },
        "secondAttempt": {
          "description": "The speed of the second attempt",
          "type": "integer"
        },
        "speedNotMet": {
          "description": "Whether the required speed was not met",
          "type": "boolean"
        },
        "outcome": {
          "$ref": "#/definitions/singleFaultCompetencyOutcome"
        }
      }
    },
    "emergencyStop": {
      "description": "The outcome of emergency stop tests",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "firstAttempt": {
          "description": "The speed of the first attempt",
          "type": "integer"
        },
        "secondAttempt": {
          "description": "The speed of the second attempt",
          "type": "integer"
        },
        "speedNotMet": {
          "description": "Whether the required speed was not met",
          "type": "boolean"
        },
        "outcome": {
          "$ref": "#/definitions/singleFaultCompetencyOutcome"
        }
      }
    },
    "ETA": {
      "$ref": "../common/index.json#/definitions/ETA"
    },
    "schoolBike": {
      "description": "Indicates whether the bike belongs to a driving school",
      "type": "boolean"
    },
    "businessName": {
      "description": "Name of the business the candidate relates to",
      "type": "string",
      "maxLength": 100
    },
    "businessTelephone": {
      "description": "Telephone number of the business the candidate relates to",
      "type": "string",
      "maxLength": 20
    }
  },
  "properties": {
    "version": {
      "description": "Version number",
      "type": "string"
    },
    "category": {
      "$ref": "#/definitions/categoryCode"
    },
    "journalData": {
      "$ref": "#/definitions/journalData"
    },
    "activityCode": {
      "$ref": "#/definitions/activityCode"
    },
    "communicationPreferences": {
      "$ref": "#/definitions/communicationPreferences"
    },
    "preTestDeclarations": {
      "$ref": "#/definitions/preTestDeclarations"
    },
    "accompaniment": {
      "$ref": "#/definitions/accompaniment"
    },
    "postTestDeclarations": {
      "$ref": "#/definitions/postTestDeclarations"
    },
    "testSummary": {
      "$ref": "#/definitions/testSummary"
    },
    "rekeyReason": {
      "$ref": "#/definitions/rekeyReason"
    },
    "rekey": {
      "description": "Whether the test was rekeyed or not",
      "type": "boolean"
    },
    "rekeyDate": {
      "description": "Date the test was rekeyed",
      "type": "string"
    },
    "changeMarker": {
      "description": "Whether the test was conducted by another examiner",
      "type": "boolean"
    },
    "examinerBooked": {
      "description": "The examiner who the test was booked to",
      "type": "number"
    },
    "examinerConducted": {
      "description": "The examiner who conducted the test",
      "type": "number"
    },
    "examinerKeyed": {
      "description": "The examiner who keyed the test into the iPad",
      "type": "number"
    },
    "passCompletion": {
      "$ref": "#/definitions/passCompletion"
    },
    "vehicleDetails": {
      "$ref": "#/definitions/vehicleDetails"
    },
    "testData": {
      "$ref": "#/definitions/testData"
    }
  },
  "additionalProperties": false,
  "required": [
    "version",
    "category",
    "journalData",
    "activityCode",
    "rekey",
    "changeMarker",
    "examinerBooked",
    "examinerConducted",
    "examinerKeyed",
    "journalData"
  ]
}